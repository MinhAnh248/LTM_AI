{"ast":null,"code":"var _jsxFileName = \"C:\\\\LTMang_AI\\\\expense_ai\\\\frontend\\\\src\\\\components\\\\CameraCapture.js\",\n  _s = $RefreshSig$();\nimport { useState, useRef, useCallback, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Camera, X, RotateCcw, Check, Upload } from 'lucide-react';\nimport { toast } from 'react-hot-toast';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CameraModal = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.9);\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n`;\n_c = CameraModal;\nconst CameraContainer = styled.div`\n  position: relative;\n  max-width: 90vw;\n  max-height: 80vh;\n  background: #000;\n  border-radius: 15px;\n  overflow: hidden;\n`;\n_c2 = CameraContainer;\nconst VideoElement = styled.video`\n  width: 100%;\n  height: auto;\n  max-height: 70vh;\n  object-fit: cover;\n`;\n_c3 = VideoElement;\nconst CapturedImage = styled.img`\n  width: 100%;\n  height: auto;\n  max-height: 70vh;\n  object-fit: contain;\n`;\n_c4 = CapturedImage;\nconst CameraControls = styled.div`\n  position: absolute;\n  bottom: 20px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n`;\n_c5 = CameraControls;\nconst ControlButton = styled.button`\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  \n  &.capture {\n    background: #fff;\n    border: 4px solid #007bff;\n    \n    &:hover {\n      transform: scale(1.1);\n    }\n  }\n  \n  &.action {\n    background: #007bff;\n    color: white;\n    \n    &:hover {\n      background: #0056b3;\n      transform: scale(1.1);\n    }\n  }\n  \n  &.danger {\n    background: #dc3545;\n    color: white;\n    \n    &:hover {\n      background: #c82333;\n      transform: scale(1.1);\n    }\n  }\n`;\n_c6 = ControlButton;\nconst CloseButton = styled.button`\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.2);\n  border: none;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.3);\n  }\n`;\n_c7 = CloseButton;\nconst FileUploadArea = styled.div`\n  width: 100%;\n  max-width: 400px;\n  padding: 2rem;\n  border: 2px dashed #007bff;\n  border-radius: 15px;\n  text-align: center;\n  background: rgba(255, 255, 255, 0.1);\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    background: rgba(255, 255, 255, 0.2);\n    border-color: #0056b3;\n  }\n`;\n_c8 = FileUploadArea;\nconst HiddenFileInput = styled.input`\n  display: none;\n`;\n_c9 = HiddenFileInput;\nconst CameraCapture = ({\n  isOpen,\n  onClose,\n  onCapture\n}) => {\n  _s();\n  const [stream, setStream] = useState(null);\n  const [capturedImage, setCapturedImage] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const fileInputRef = useRef(null);\n  const startCamera = useCallback(async () => {\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'environment',\n          // Sử dụng camera sau nếu có\n          width: {\n            ideal: 1280\n          },\n          height: {\n            ideal: 720\n          }\n        }\n      });\n      setStream(mediaStream);\n      if (videoRef.current) {\n        videoRef.current.srcObject = mediaStream;\n      }\n    } catch (error) {\n      console.error('Error accessing camera:', error);\n      toast.error('Không thể truy cập camera. Vui lòng cho phép quyền camera.');\n    }\n  }, []);\n  const stopCamera = useCallback(() => {\n    if (stream) {\n      stream.getTracks().forEach(track => track.stop());\n      setStream(null);\n    }\n  }, [stream]);\n  const capturePhoto = useCallback(() => {\n    if (!videoRef.current) return;\n    const canvas = canvasRef.current;\n    const video = videoRef.current;\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    const ctx = canvas.getContext('2d');\n    ctx.drawImage(video, 0, 0);\n    const imageDataUrl = canvas.toDataURL('image/jpeg', 0.8);\n    setCapturedImage(imageDataUrl);\n    stopCamera();\n  }, [stopCamera]);\n  const retakePhoto = useCallback(() => {\n    setCapturedImage(null);\n    startCamera();\n  }, [startCamera]);\n  const confirmCapture = useCallback(async () => {\n    if (!capturedImage) return;\n    setIsProcessing(true);\n    try {\n      // Convert data URL to blob\n      const response = await fetch(capturedImage);\n      const blob = await response.blob();\n      await onCapture(blob);\n      handleClose();\n    } catch (error) {\n      console.error('Error processing image:', error);\n      toast.error('Có lỗi xảy ra khi xử lý ảnh');\n    } finally {\n      setIsProcessing(false);\n    }\n  }, [capturedImage, onCapture]);\n  const handleFileUpload = useCallback(async event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    if (!file.type.startsWith('image/')) {\n      toast.error('Vui lòng chọn file ảnh');\n      return;\n    }\n    setIsProcessing(true);\n    try {\n      await onCapture(file);\n      handleClose();\n    } catch (error) {\n      console.error('Error processing uploaded file:', error);\n      toast.error('Có lỗi xảy ra khi xử lý ảnh');\n    } finally {\n      setIsProcessing(false);\n    }\n  }, [onCapture]);\n  const handleClose = useCallback(() => {\n    stopCamera();\n    setCapturedImage(null);\n    setIsProcessing(false);\n    onClose();\n  }, [stopCamera, onClose]);\n\n  // Start camera when modal opens\n  useEffect(() => {\n    if (isOpen && !capturedImage) {\n      startCamera();\n    }\n    return () => {\n      if (!isOpen) {\n        stopCamera();\n      }\n    };\n  }, [isOpen, capturedImage, startCamera, stopCamera]);\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(CameraModal, {\n    children: [/*#__PURE__*/_jsxDEV(CloseButton, {\n      onClick: handleClose,\n      children: /*#__PURE__*/_jsxDEV(X, {\n        size: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CameraContainer, {\n      children: capturedImage ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(CapturedImage, {\n          src: capturedImage,\n          alt: \"Captured receipt\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CameraControls, {\n          children: [/*#__PURE__*/_jsxDEV(ControlButton, {\n            className: \"danger\",\n            onClick: retakePhoto,\n            title: \"Ch\\u1EE5p l\\u1EA1i\",\n            children: /*#__PURE__*/_jsxDEV(RotateCcw, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(ControlButton, {\n            className: \"action\",\n            onClick: confirmCapture,\n            disabled: isProcessing,\n            title: \"X\\xE1c nh\\u1EADn\",\n            children: /*#__PURE__*/_jsxDEV(Check, {\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : stream ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(VideoElement, {\n          ref: videoRef,\n          autoPlay: true,\n          playsInline: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(CameraControls, {\n          children: /*#__PURE__*/_jsxDEV(ControlButton, {\n            className: \"capture\",\n            onClick: capturePhoto,\n            title: \"Ch\\u1EE5p \\u1EA3nh\",\n            children: /*#__PURE__*/_jsxDEV(Camera, {\n              size: 24,\n              color: \"#007bff\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(FileUploadArea, {\n        onClick: () => {\n          var _fileInputRef$current;\n          return (_fileInputRef$current = fileInputRef.current) === null || _fileInputRef$current === void 0 ? void 0 : _fileInputRef$current.click();\n        },\n        children: [/*#__PURE__*/_jsxDEV(Upload, {\n          size: 48,\n          style: {\n            marginBottom: '1rem'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Ch\\u1EE5p \\u1EA3nh h\\xF3a \\u0111\\u01A1n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Nh\\u1EA5n \\u0111\\u1EC3 ch\\u1ECDn \\u1EA3nh t\\u1EEB th\\u01B0 vi\\u1EC7n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '0.9rem',\n            marginTop: '0.5rem',\n            opacity: 0.8\n          },\n          children: \"Ho\\u1EB7c cho ph\\xE9p camera \\u0111\\u1EC3 ch\\u1EE5p \\u1EA3nh tr\\u1EF1c ti\\u1EBFp\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HiddenFileInput, {\n      ref: fileInputRef,\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: handleFileUpload\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: 'none'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 256,\n    columnNumber: 5\n  }, this);\n};\n_s(CameraCapture, \"umnczlyXEEu2tMOzmHSmPWzovYs=\");\n_c0 = CameraCapture;\nexport default CameraCapture;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0;\n$RefreshReg$(_c, \"CameraModal\");\n$RefreshReg$(_c2, \"CameraContainer\");\n$RefreshReg$(_c3, \"VideoElement\");\n$RefreshReg$(_c4, \"CapturedImage\");\n$RefreshReg$(_c5, \"CameraControls\");\n$RefreshReg$(_c6, \"ControlButton\");\n$RefreshReg$(_c7, \"CloseButton\");\n$RefreshReg$(_c8, \"FileUploadArea\");\n$RefreshReg$(_c9, \"HiddenFileInput\");\n$RefreshReg$(_c0, \"CameraCapture\");","map":{"version":3,"names":["useState","useRef","useCallback","useEffect","styled","Camera","X","RotateCcw","Check","Upload","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","CameraModal","div","_c","CameraContainer","_c2","VideoElement","video","_c3","CapturedImage","img","_c4","CameraControls","_c5","ControlButton","button","_c6","CloseButton","_c7","FileUploadArea","_c8","HiddenFileInput","input","_c9","CameraCapture","isOpen","onClose","onCapture","_s","stream","setStream","capturedImage","setCapturedImage","isProcessing","setIsProcessing","videoRef","canvasRef","fileInputRef","startCamera","mediaStream","navigator","mediaDevices","getUserMedia","facingMode","width","ideal","height","current","srcObject","error","console","stopCamera","getTracks","forEach","track","stop","capturePhoto","canvas","videoWidth","videoHeight","ctx","getContext","drawImage","imageDataUrl","toDataURL","retakePhoto","confirmCapture","response","fetch","blob","handleClose","handleFileUpload","event","file","target","files","type","startsWith","children","onClick","size","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","className","title","disabled","ref","autoPlay","playsInline","color","_fileInputRef$current","click","style","marginBottom","fontSize","marginTop","opacity","accept","onChange","display","_c0","$RefreshReg$"],"sources":["C:/LTMang_AI/expense_ai/frontend/src/components/CameraCapture.js"],"sourcesContent":["import { useState, useRef, useCallback, useEffect } from 'react';\r\nimport styled from 'styled-components';\r\nimport { Camera, X, RotateCcw, Check, Upload } from 'lucide-react';\r\nimport { toast } from 'react-hot-toast';\r\n\r\nconst CameraModal = styled.div`\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.9);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n`;\r\n\r\nconst CameraContainer = styled.div`\r\n  position: relative;\r\n  max-width: 90vw;\r\n  max-height: 80vh;\r\n  background: #000;\r\n  border-radius: 15px;\r\n  overflow: hidden;\r\n`;\r\n\r\nconst VideoElement = styled.video`\r\n  width: 100%;\r\n  height: auto;\r\n  max-height: 70vh;\r\n  object-fit: cover;\r\n`;\r\n\r\nconst CapturedImage = styled.img`\r\n  width: 100%;\r\n  height: auto;\r\n  max-height: 70vh;\r\n  object-fit: contain;\r\n`;\r\n\r\nconst CameraControls = styled.div`\r\n  position: absolute;\r\n  bottom: 20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  display: flex;\r\n  gap: 1rem;\r\n  align-items: center;\r\n`;\r\n\r\nconst ControlButton = styled.button`\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.3s ease;\r\n  \r\n  &.capture {\r\n    background: #fff;\r\n    border: 4px solid #007bff;\r\n    \r\n    &:hover {\r\n      transform: scale(1.1);\r\n    }\r\n  }\r\n  \r\n  &.action {\r\n    background: #007bff;\r\n    color: white;\r\n    \r\n    &:hover {\r\n      background: #0056b3;\r\n      transform: scale(1.1);\r\n    }\r\n  }\r\n  \r\n  &.danger {\r\n    background: #dc3545;\r\n    color: white;\r\n    \r\n    &:hover {\r\n      background: #c82333;\r\n      transform: scale(1.1);\r\n    }\r\n  }\r\n`;\r\n\r\nconst CloseButton = styled.button`\r\n  position: absolute;\r\n  top: 20px;\r\n  right: 20px;\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 50%;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border: none;\r\n  color: white;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  \r\n  &:hover {\r\n    background: rgba(255, 255, 255, 0.3);\r\n  }\r\n`;\r\n\r\nconst FileUploadArea = styled.div`\r\n  width: 100%;\r\n  max-width: 400px;\r\n  padding: 2rem;\r\n  border: 2px dashed #007bff;\r\n  border-radius: 15px;\r\n  text-align: center;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  color: white;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  \r\n  &:hover {\r\n    background: rgba(255, 255, 255, 0.2);\r\n    border-color: #0056b3;\r\n  }\r\n`;\r\n\r\nconst HiddenFileInput = styled.input`\r\n  display: none;\r\n`;\r\n\r\nconst CameraCapture = ({ isOpen, onClose, onCapture }) => {\r\n  const [stream, setStream] = useState(null);\r\n  const [capturedImage, setCapturedImage] = useState(null);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const fileInputRef = useRef(null);\r\n\r\n  const startCamera = useCallback(async () => {\r\n    try {\r\n      const mediaStream = await navigator.mediaDevices.getUserMedia({\r\n        video: { \r\n          facingMode: 'environment', // Sử dụng camera sau nếu có\r\n          width: { ideal: 1280 },\r\n          height: { ideal: 720 }\r\n        }\r\n      });\r\n      \r\n      setStream(mediaStream);\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = mediaStream;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error accessing camera:', error);\r\n      toast.error('Không thể truy cập camera. Vui lòng cho phép quyền camera.');\r\n    }\r\n  }, []);\r\n\r\n  const stopCamera = useCallback(() => {\r\n    if (stream) {\r\n      stream.getTracks().forEach(track => track.stop());\r\n      setStream(null);\r\n    }\r\n  }, [stream]);\r\n\r\n  const capturePhoto = useCallback(() => {\r\n    if (!videoRef.current) return;\r\n\r\n    const canvas = canvasRef.current;\r\n    const video = videoRef.current;\r\n    \r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n    \r\n    const ctx = canvas.getContext('2d');\r\n    ctx.drawImage(video, 0, 0);\r\n    \r\n    const imageDataUrl = canvas.toDataURL('image/jpeg', 0.8);\r\n    setCapturedImage(imageDataUrl);\r\n    stopCamera();\r\n  }, [stopCamera]);\r\n\r\n  const retakePhoto = useCallback(() => {\r\n    setCapturedImage(null);\r\n    startCamera();\r\n  }, [startCamera]);\r\n\r\n  const confirmCapture = useCallback(async () => {\r\n    if (!capturedImage) return;\r\n    \r\n    setIsProcessing(true);\r\n    try {\r\n      // Convert data URL to blob\r\n      const response = await fetch(capturedImage);\r\n      const blob = await response.blob();\r\n      \r\n      await onCapture(blob);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.error('Error processing image:', error);\r\n      toast.error('Có lỗi xảy ra khi xử lý ảnh');\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  }, [capturedImage, onCapture]);\r\n\r\n  const handleFileUpload = useCallback(async (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n\r\n    if (!file.type.startsWith('image/')) {\r\n      toast.error('Vui lòng chọn file ảnh');\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    try {\r\n      await onCapture(file);\r\n      handleClose();\r\n    } catch (error) {\r\n      console.error('Error processing uploaded file:', error);\r\n      toast.error('Có lỗi xảy ra khi xử lý ảnh');\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  }, [onCapture]);\r\n\r\n  const handleClose = useCallback(() => {\r\n    stopCamera();\r\n    setCapturedImage(null);\r\n    setIsProcessing(false);\r\n    onClose();\r\n  }, [stopCamera, onClose]);\r\n\r\n  // Start camera when modal opens\r\n  useEffect(() => {\r\n    if (isOpen && !capturedImage) {\r\n      startCamera();\r\n    }\r\n    \r\n    return () => {\r\n      if (!isOpen) {\r\n        stopCamera();\r\n      }\r\n    };\r\n  }, [isOpen, capturedImage, startCamera, stopCamera]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <CameraModal>\r\n      <CloseButton onClick={handleClose}>\r\n        <X size={20} />\r\n      </CloseButton>\r\n\r\n      <CameraContainer>\r\n        {capturedImage ? (\r\n          <>\r\n            <CapturedImage src={capturedImage} alt=\"Captured receipt\" />\r\n            <CameraControls>\r\n              <ControlButton className=\"danger\" onClick={retakePhoto} title=\"Chụp lại\">\r\n                <RotateCcw size={24} />\r\n              </ControlButton>\r\n              <ControlButton \r\n                className=\"action\" \r\n                onClick={confirmCapture} \r\n                disabled={isProcessing}\r\n                title=\"Xác nhận\"\r\n              >\r\n                <Check size={24} />\r\n              </ControlButton>\r\n            </CameraControls>\r\n          </>\r\n        ) : stream ? (\r\n          <>\r\n            <VideoElement ref={videoRef} autoPlay playsInline />\r\n            <CameraControls>\r\n              <ControlButton className=\"capture\" onClick={capturePhoto} title=\"Chụp ảnh\">\r\n                <Camera size={24} color=\"#007bff\" />\r\n              </ControlButton>\r\n            </CameraControls>\r\n          </>\r\n        ) : (\r\n          <FileUploadArea onClick={() => fileInputRef.current?.click()}>\r\n            <Upload size={48} style={{ marginBottom: '1rem' }} />\r\n            <h3>Chụp ảnh hóa đơn</h3>\r\n            <p>Nhấn để chọn ảnh từ thư viện</p>\r\n            <p style={{ fontSize: '0.9rem', marginTop: '0.5rem', opacity: 0.8 }}>\r\n              Hoặc cho phép camera để chụp ảnh trực tiếp\r\n            </p>\r\n          </FileUploadArea>\r\n        )}\r\n      </CameraContainer>\r\n\r\n      <HiddenFileInput\r\n        ref={fileInputRef}\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        onChange={handleFileUpload}\r\n      />\r\n\r\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n    </CameraModal>\r\n  );\r\n};\r\n\r\nexport default CameraCapture;"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAChE,OAAOC,MAAM,MAAM,mBAAmB;AACtC,SAASC,MAAM,EAAEC,CAAC,EAAEC,SAAS,EAAEC,KAAK,EAAEC,MAAM,QAAQ,cAAc;AAClE,SAASC,KAAK,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAExC,MAAMC,WAAW,GAAGX,MAAM,CAACY,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,EAAA,GAZIF,WAAW;AAcjB,MAAMG,eAAe,GAAGd,MAAM,CAACY,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GAPID,eAAe;AASrB,MAAME,YAAY,GAAGhB,MAAM,CAACiB,KAAK;AACjC;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GALIF,YAAY;AAOlB,MAAMG,aAAa,GAAGnB,MAAM,CAACoB,GAAG;AAChC;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GALIF,aAAa;AAOnB,MAAMG,cAAc,GAAGtB,MAAM,CAACY,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACW,GAAA,GARID,cAAc;AAUpB,MAAME,aAAa,GAAGxB,MAAM,CAACyB,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACC,GAAA,GAvCIF,aAAa;AAyCnB,MAAMG,WAAW,GAAG3B,MAAM,CAACyB,MAAM;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAACG,GAAA,GAlBID,WAAW;AAoBjB,MAA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}